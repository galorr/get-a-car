<div class="search-container" [class.expanded]="isExpanded()">
  <div class="search-header" (click)="toggleExpand()">
    <i class="search-icon">üîç</i>
    <span>Search Cars</span>
    <i class="toggle-icon">{{ isExpanded() ? '‚ñº' : '‚ñ≤' }}</i>
  </div>
  
  <div class="search-content">
    <div class="search-input-container">
      <input
        type="text"
        placeholder="Search by name, ID, status..."
        [(ngModel)]="searchTerm()"
        (input)="search($any($event.target).value)"
        autocomplete="off">
      <button class="clear-button" *ngIf="searchTerm()" (click)="clearSearch()">‚úï</button>
    </div>
    
    <!-- Recent Searches -->
    @if (recentSearches().length > 0 && !searchTerm()) {
      <div class="recent-searches">
        <div class="section-title">Recent Searches</div>
        <ul>
          @for (term of recentSearches(); track term; let i = $index) {
            <li (click)="useRecentSearch(term)">
              <i class="history-icon">‚è±Ô∏è</i>
              <span class="search-term">{{ term }}</span>
              <button class="remove-button" (click)="removeRecentSearch(i, $event)">‚úï</button>
            </li>
          }
        </ul>
      </div>
    }
    
    <!-- Search Results -->
    @if (searchResults().length > 0) {
      <div class="search-results">
        <div class="section-title">{{ searchResults().length }} results found</div>
        <ul>
          @for (car of searchResults(); track car.id) {
            <li (click)="selectCar(car)">
              <div class="car-name">{{ car.name }}</div>
              <div class="car-details">
                <span class="car-id">{{ car.id }}</span>
                <span class="status-badge {{ getStatusClass(car.status) }}">{{ car.status }}</span>
              </div>
              @if (car.model || car.licensePlate) {
                <div class="car-extra-info">
                  @if (car.model) {
                    <span class="car-model">{{ car.model }}</span>
                  }
                  @if (car.licensePlate) {
                    <span class="car-license">{{ car.licensePlate }}</span>
                  }
                </div>
              }
            </li>
          }
        </ul>
      </div>
    }
    
    <!-- No Results -->
    @if (searchTerm() && searchResults().length === 0) {
      <div class="no-results">
        <i class="no-results-icon">üîé</i>
        <p>No cars found matching "{{ searchTerm() }}"</p>
      </div>
    }
  </div>
</div>